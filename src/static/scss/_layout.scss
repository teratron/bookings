@use "sass:math";

// Grid
%grid {
    display: grid;
}

// Column
/*@mixin set-column($column: 12, $gap: 0) {
    grid-template-columns: repeat($column, minmax(0, 1fr));

    //@if $gap >0 {
    //grid-gap: $gap;
    //@extend %layout-gap-adaptive;
    //}
}*/

.grid {
    @extend %grid;
    //@include set-column($layout-column, $layout-gap);
    grid-template-columns: repeat($layout-column, minmax(0, 1fr));
    grid-auto-columns: auto;
    grid-auto-rows: auto;

    @if $layout-gap >0 {
        grid-gap: $layout-gap;
        @extend %layout-gap-adaptive;
    }
}

%span {
    width: auto;
    max-width: none;
}

@for $i from 1 through $layout-column {
    .span-#{$i} {
        grid-column: span $i;
        @extend %span;

        &.grid {
            //@include set-column($i, $layout-gap);
            grid-template-columns: repeat($i, minmax(0, 1fr));
        }
    }
}

@media only screen and (max-width: $layout-width-gap) {
    %layout-gap-adaptive {
        grid-gap: $layout-gap-adaptive;
    }
}

@for $i from $layout-column to 1 {
    $k: $i - 1;
    $b: math.round($layout-width-gap - ($layout-column - $k) * $grid-step);

    @media only screen {
        @media (max-width: $b) {
            .shrink {
                grid-template-columns: repeat($k, minmax(0, 1fr));

                >%span-#{$i} {
                    grid-column: span $k;
                    grid-template-columns: repeat($k, minmax(0, 1fr));
                    //@include set-column($k);
                }
            }

            @for $j from $i through $layout-column {
                .span-#{$j} {
                    @extend %span-#{$i};
                }
            }
        }
    }
}

// Breakpoint
/*@media only screen {
    @media (max-width: $layout-width-gap) {
        %layout-gap-adaptive {
            grid-gap: $layout-gap-adaptive;
        }
    }
}*/